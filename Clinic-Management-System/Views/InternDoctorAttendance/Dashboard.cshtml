@model IEnumerable<Clinic_Management_System.Models.InternDoctorAttendance>
@using System.Globalization

@{
    ViewData["Title"] = "تقرير حضور الطبيب";
}

<div class="container py-4">

    <!-- 🔷 العنوان -->
    <div class="card card-modern mb-4 text-center">
        <h3 class="text-primary fw-bold mb-2">
            <i class="bi bi-clipboard-data"></i> تقرير الحضور للطبيب
        </h3>
        <h4 class="fw-bold">@ViewBag.DoctorName</h4>
    </div>

    <!-- 🔷 ملخص الحضور -->
    <div class="row g-3 mb-4">

        <div class="col-md-3">
            <div class="stats-card shadow-sm">
                <h6> عدد الأيام</h6>
                <p class="value text-success">@ViewBag.TotalDays</p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stats-card shadow-sm">
                <h6> إجمالي الساعات</h6>
                <p class="value text-primary">@ViewBag.TotalHours</p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stats-card shadow-sm">
                <h6> متوسط الساعات</h6>
                <p class="value text-warning">@ViewBag.AvgHours</p>
            </div>
        </div>

        <div class="col-md-3">
            <div class="stats-card shadow-sm">
                <h6> الفترة</h6>
                <p class="value">@ViewBag.StartDate ➜ @ViewBag.EndDate</p>
            </div>
        </div>
    </div>

    <!-- 🔷 جدول الحضور -->
    @if (Model != null && Model.Any())
    {
        <div class="card card-modern">
            <table class="table table-modern table-hover text-center align-middle">
                <thead>
                    <tr>
                        <th> التاريخ</th>
                        <th> وقت الدخول</th>
                        <th> وقت الخروج</th>
                        <th> عدد الساعات</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var record in Model)
                    {
                        <tr>
                            <td>@record.Date.ToString("yyyy/MM/dd")</td>
                            <td>@(record.CheckIn?.ToString("hh:mm tt", new CultureInfo("ar-EG")) ?? "—")</td>
                            <td>@(record.CheckOut?.ToString("hh:mm tt", new CultureInfo("ar-EG")) ?? "—")</td>
                            <td>@(record.Hours?.ToString("0.##") ?? "—")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div class="alert alert-info text-center">
            لا توجد سجلات حضور في هذه الفترة.
        </div>
    }

    <!-- 🔘 زر الرجوع -->
    <div class="text-center mt-4">
        <a asp-controller="InternDoctors" asp-action="Index" class="btn btn-outline-secondary px-4 rounded-pill">
            <i class="bi bi-arrow-return-left"></i> رجوع لقائمة الأطباء
        </a>
    </div>
</div>

@section Scripts {
    <style>

        /* 🌟 الكارد الموحد */
        .card-modern {
            background: #fff;
            border-radius: 20px;
            padding: 25px;
            border: 2px solid #0077B6;
            box-shadow: 0 10px 30px rgba(0, 119, 182, 0.45);
            animation: fadeIn 0.4s ease;
        }

        /* 🌟 بطاقات الإحصائيات */
        .stats-card {
            background: #ffffff;
            border: 2px solid #00B4D8;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

            .stats-card h6 {
                color: #0077B6;
                font-weight: 700;
            }

            .stats-card .value {
                font-size: 1.7rem;
                font-weight: bold;
                margin-top: 8px;
            }

        /* 🌟 الجدول */
        .table-modern {
            border-radius: 12px;
            overflow: hidden;
            background: #ffffff;
            box-shadow: 0 4px 15px rgba(0, 119, 182, 0.25);
        }

            .table-modern th {
                background-color: #eaf9fb !important;
                color: #0077B6;
                font-weight: 700;
                border-bottom: 2px solid #00B4D8;
            }

            .table-modern tbody tr:hover {
                background-color: #f3fcfd !important;
                transition: 0.2s ease;
            }

        /* 🌟 الأنيميشن */
        @@keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
}
