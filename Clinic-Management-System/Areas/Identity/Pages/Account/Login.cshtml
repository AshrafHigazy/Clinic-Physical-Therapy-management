@page
@model LoginModel
@{
    ViewData["Title"] = "تسجيل الدخول";
}

<div class="container py-5" dir="rtl">

    <div class="row justify-content-center align-items-start">

        <!-- 🔵 صندوق تسجيل الدخول -->
        <div class="col-md-5">
            <div class="login-card-modern p-4 rounded-4">

                <h3 class="fw-bold text-center text-primary mb-4">
                    <i class="bi bi-box-arrow-in-right"></i> تسجيل الدخول
                </h3>

                <!-- رسالة الأخطاء -->
                <div asp-validation-summary="ModelOnly"
                     class="alert alert-danger text-center"
                     role="alert"></div>

                <!-- النموذج -->
                <form id="account" method="post">

                    <!-- البريد -->
                    <div class="form-floating mb-3">
                        <input asp-for="Input.Email"
                               class="form-control input-modern"
                               placeholder="example@mail.com"
                               autocomplete="username" />
                        <label asp-for="Input.Email">البريد الإلكتروني</label>
                        <span asp-validation-for="Input.Email" class="text-danger small"></span>
                    </div>

                    <!-- كلمة المرور -->
                    <div class="form-floating mb-3">
                        <input asp-for="Input.Password"
                               class="form-control input-modern"
                               placeholder="••••••••"
                               autocomplete="current-password" />
                        <label asp-for="Input.Password">كلمة المرور</label>
                        <span asp-validation-for="Input.Password" class="text-danger small"></span>
                    </div>

                    <!-- تذكرني -->
                    <div class="form-check mb-3">
                        <input class="form-check-input" asp-for="Input.RememberMe" />
                        <label class="form-check-label" asp-for="Input.RememberMe">تذكّرني</label>
                    </div>

                    <!-- زر الدخول -->
                    <button type="submit"
                            id="login-submit"
                            class="btn btn-login-modern w-100 py-2 fw-bold">
                        <i class="bi bi-door-open"></i> دخول
                    </button>

                    <!-- روابط سفليّة -->
                    <div class="text-center mt-3">

                        <p>
                            <a asp-page="./ForgotPassword"
                               class="text-decoration-none fw-semibold text-primary">
                                هل نسيت كلمة المرور؟
                            </a>
                        </p>

                        <p>
                            <a asp-page="./Register"
                               asp-route-returnUrl="@Model.ReturnUrl"
                               class="text-decoration-none fw-semibold text-primary">
                                إنشاء حساب جديد
                            </a>
                        </p>

                        <p>
                            <a asp-page="./ResendEmailConfirmation"
                               class="text-decoration-none fw-semibold text-primary">
                                إعادة إرسال تأكيد البريد
                            </a>
                        </p>

                    </div>

                </form>

            </div>
        </div>



        <!-- 🟣 تسجيل الدخول الخارجي -->
        <div class="col-md-5 mt-4 mt-md-0">
            <div class="external-login-card p-4 rounded-4">

                <h4 class="fw-bold text-center text-secondary mb-3">
                    تسجيل الدخول عبر خدمة خارجية
                </h4>

                <hr />

                @if ((Model.ExternalLogins?.Count ?? 0) == 0)
                {
                    <p class="text-muted text-center">لا توجد طرق تسجيل خارجية متاحة حاليًا.</p>
                }
                else
                {
                    <form asp-page="./ExternalLogin"
                          asp-route-returnUrl="@Model.ReturnUrl"
                          method="post">

                        <div class="d-flex flex-column gap-2">

                            @foreach (var provider in Model.ExternalLogins!)
                            {
                                <button type="submit"
                                        name="provider"
                                        value="@provider.Name"
                                        class="btn btn-outline-primary external-btn rounded-pill py-2 fw-bold">
                                    <i class="bi bi-shield-lock"></i> @provider.DisplayName
                                </button>
                            }

                        </div>

                    </form>
                }

            </div>
        </div>

    </div>

</div>


@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<!-- 🔥 CSS مخصص لجعل التصميم قريب جداً من تصميم البطاقات الحديثة -->
<style>

    :root {
        --main-color: #00B4D8;
        --main-dark: #0077B6;
        --bg-light: #F7FBFC;
    }

    /* بطاقة تسجيل الدخول */
    .login-card-modern {
        background: #ffffff;
        border: 2px solid var(--main-dark);
        box-shadow: 0 12px 28px rgba(0, 119, 182, 0.30);
        animation: pop 0.5s ease;
    }

    /* بطاقة تسجيل خارجي */
    .external-login-card {
        background: #ffffff;
        border: 2px solid #adb5bd;
        box-shadow: 0 8px 20px rgba(0,0,0,0.10);
        animation: pop 0.6s ease;
    }

    /* مدخلات حديثة */
    .input-modern {
        border: 2px solid var(--main-color);
        border-radius: 10px;
        transition: 0.3s;
    }

        .input-modern:focus {
            border-color: var(--main-dark);
            box-shadow: 0 0 0 0.2rem rgba(0, 183, 255, 0.25);
        }

    /* زر الدخول */
    .btn-login-modern {
        background: var(--main-dark);
        color: #fff;
        border-radius: 12px;
        transition: 0.3s;
        font-size: 1.1rem;
    }

        .btn-login-modern:hover {
            background: var(--main-color);
            transform: translateY(-2px);
        }

    /* أزرار التسجيل الخارجي */
    .external-btn:hover {
        background: var(--main-color);
        color: #fff;
        border-color: var(--main-color);
        transform: translateY(-2px);
    }

    /* حركة لطيفة */
    @@keyframes pop {
        from

    {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    }
</style>
